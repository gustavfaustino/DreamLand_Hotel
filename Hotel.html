<html>
  <!-- 
  ^~^  ,
 ('Y') )
 /   \/ 
(\|||/) Made by GustavG
-->
  <head>
    <script>
      const NOME_HOTEL = "DreamLand";
      const SENHA_HOTEL = 2678;
      var nome_funcionario = "";
      var quantidade_quartos = 20;

      var quartos = [
        "1- livre",
        "2- livre",
        "3- livre",
        "4- livre",
        "5- livre",
        "6- livre",
        "7- livre",
        "8- livre",
        "9- livre",
        "10- livre",
        "11- livre",
        "12- livre",
        "13- livre",
        "14- livre",
        "15- livre",
        "16- livre",
        "17- livre",
        "18- livre",
        "19- livre",
        "20- livre",
      ];

      var hospedes = [];

      // Função de acesso
      setTimeout(function acesso() {
        nome_funcionario = prompt("Informe seu nome");
        var senha = parseInt(prompt("Informe sua senha"));

        if (senha === SENHA_HOTEL) {
          alert(
            `Bem vindo ao HOTEL ${NOME_HOTEL}, ${nome_funcionario}. É um imenso prazer ter você por aqui!`
          );
          inicio();
        } else {
          alert("Senha incorreta");
          acesso();
        }
      }, 1000);

      //   Função inicial para escolha no menu
      function inicio() {
        var escolha = parseInt(
          prompt(
            "Selecione uma opção 1.) Reserva de Quartos 2.) Cadastro de Hóspedes 3.) Abastecimento de Carros 4.) Sair"
          )
        );

        switch (escolha) {
          case 1:
            reserva_quartos();
            break;
          case 2:
            opcoes_cadastro();
            break;
          case 3:
            abastecer_carros();
            break;
          case 4:
            sair();
            break;
          default:
            erro();
        }
      }

      //   Escolha reserva quartos
      function reserva_quartos() {
        alert(`HOTEL ${NOME_HOTEL} - RESERVA DE QUARTOS`);

        // Lógica de verficação de valores:
        let DiariaValida = false;
        let DiasValidos = false;
        var valor_diaria, quantidade_dia;

        while (!DiariaValida) {
          valor_diaria = prompt("Qual o valor padrão da diária?");
          if (valor_diaria >= 0) {
            DiariaValida = true; // Sai do loop
          } else {
            alert(`Valor inválido, ${nome_funcionario}`);
          }
        }
        while (!DiasValidos) {
          quantidade_dia = prompt("Quantas diárias serão necessárias");
          if (quantidade_dia >= 0 && quantidade_dia <= 30) {
            DiasValidos = true; // Sai do loop
          } else {
            alert(`Valor inválido, ${nome_funcionario}`);
          }
        }
        // Fim da verficação
        let ValorPagar = quantidade_dia * valor_diaria;

        alert(
          `O valor de ${quantidade_dia} dias de hospedagem é de R$${ValorPagar.toFixed(
            2
          )}`
        );
        // Lógica da hospedagem
        let NomeHospede = prompt("Qual o nome do hóspede?");

        let QuartoDisponivel = false;

        while (!QuartoDisponivel) {
          alert(`Lista de quartos e suas ocupações:\n${quartos.join("; ")}`);

          var numero_quarto = parseInt(
            prompt("Qual o quarto pra reserva? (1 - 20)?")
          );
          console.log(numero_quarto); //  verificação simples pessoal

          if (numero_quarto >= 1 && numero_quarto <= 20) {
            let indiceQuarto = numero_quarto - 1;

            // verificação se há quartos disponíveis
            if (quartos[indiceQuarto].includes("livre")) {
              quartos[indiceQuarto] = `${numero_quarto}- ocupado`;
              alert("Quarto livre.");
              QuartoDisponivel = true; // se sim, sai do loop
            } else {
              alert("Quarto está ocupado. Escolha outro.");
            }
          } else {
            alert("Quarto inválido, selecione um quarto válido!");
          }
        }

        let Confirma = confirm(
          `${nome_funcionario}, você confirma a hospedagem para ${NomeHospede} por ${quantidade_dia} dias
                      para o quarto ${numero_quarto} por R$${ValorPagar.toFixed(
            2
          )}?`
        );

        if (Confirma) {
          alert(`${nome_funcionario}, reserva efetuada para ${NomeHospede}`);
          alert(`Lista de quartos e suas ocupações:\n${quartos.join("; ")}`);
        } else {
          alert("Reserva cancelada. Voltando ao menu inicial...");
          reserva_quartos();
        }

        inicio();
      }

      //       Aqui vamos tratar do cadastro de hóspedes, mas de uma forma diferente.
      // Como no programa anterior, imagine que uma família acaba de chegar ao balcão do hotel e quer se hospedar.

      // Monte um programa em que o usuário poderá cadastrar e pesquisar hóspedes.

      // O programa deve oferecer um menu com algumas opções ao usuário: 1- cadastrar; 2- pesquisar; 3-listar; 4- sair.

      // A opção “cadastrar” deve permitir que o usuário informe um nome de hóspede, gravando-o em memória (máximo de 15 cadastros; caso atinja essa quantidade, mostre “Máximo de cadastros atingido”).

      // A opção “pesquisar” deve permitir que o usuário informe um nome e, caso seja encontrado um nome exatamente igual, mostre a mensagem “Hospede (nome) foi encontrado". Se o nome não foi encontrado mostre “Hóspede não encontrado”.

      // A opção “listar” exibe todos os hóspedes do hotel um a um.

      // O programa deve permitir que o usuário realize essas operações repetidas várias vezes, até que use a opção “4”, que retorna ao menu principal.

      function opcoes_cadastro() {
        alert(`HOTEL ${NOME_HOTEL} - CADASTRO DE HÓSPEDE OPÇÕES`);

        var opcao = parseInt(
          prompt(
            "Selecione uma opção 1.) Cadastrar 2.) Pesquisar 3.) Listar 4.) Sair"
          )
        );

        switch (opcao) {
          case 1:
            cadastro_hospedes();
            break;
          case 2:
            pesquisar_hospede();
            break;
          case 3:
            listar_hospedes();
            break;
          case 4:
            confirm("Você deseja sair?") ? inicio() : opcoes_cadastro(); // Lambda para confirmar saída
            // Se confirmar, volta ao início, senão, volta ao menu de opções
            break;
          default:
            erro();
        }
      }

      //   Escolha cadastro hospedes
      function cadastro_hospedes() {
        alert(`HOTEL ${NOME_HOTEL} - CADASTRO DE HÓSPEDE`);

        var valor_diaria_padrao = parseFloat(
          prompt("Informe o valor padrão da diária")
        );

        // Inicialização das variáveis de controle fora do loop
        var gratuidade = 0;
        var meia = 0;
        var valor_total = 0;

        var loop = true;
        for (let i = 1; i <= 15 && loop; i++) {
          var nome_hospede = prompt("Informe o nome do hóspede");
          var idade_hospede = parseInt(prompt("Informe a idade do hóspede"));

          var texto_padrao = `${nome_hospede} cadastrado(a) com sucesso!`;

          var tipo_hospede = "Paga inteira"; // Tipo padrão de hospedagem
          var valor_a_pagar = valor_diaria_padrao; // Valor padrão a ser pago

          if (idade_hospede <= 6) {
            // Observação: No exercício original, a gratuidade era para menores de 6 anos mas no exemplo
            // quem tinha 6 anos pagava meia. Por isso, a gratuidade.
            alert(`${texto_padrao}\n${nome_hospede} possui gratuidade`);
            tipo_hospede = "Gratuidade";
            gratuidade++;
            valor_a_pagar = 0; // Gratuidade, não paga nada
          } else if (idade_hospede >= 60) {
            // Mesma observação do item anterior.
            alert(`${texto_padrao}\n${nome_hospede} paga meia`);

            meia++;
            valor_a_pagar /= 2; // Meia hospedagem, paga metade
            tipo_hospede = "Meia";
          } else {
            alert(texto_padrao);
          }

          hospedes.push({
            Hospede: nome_hospede,
            Idade: idade_hospede,
            Tipo: tipo_hospede,
            Valor: valor_a_pagar,
          });

          valor_total += valor_a_pagar; // Acumula o valor a pagar no total

          var continuar = prompt("Deseja continuar? (S/N)").toUpperCase();
          if (continuar === "N") {
            loop = false;
          }
          if (i === 15) {
            alert("Máximo de cadastros atingido");
            break;
          }
        }

        alert(
          `${nome_funcionario}, a quantidade de gratuidades: ${gratuidade}\n
              Quantidade de meias hospedagens: ${meia}\n
              Valor total: R$${valor_total.toFixed(2)}`
        );
        opcoes_cadastro();
      }

      function pesquisar_hospede() {
        alert(`HOTEL ${NOME_HOTEL} - PESQUISAR HÓSPEDE`);

        var nome_pesquisa = prompt("Informe o nome do hóspede");

        var encontrado = hospedes.find(
          (hospede) => hospede.Hospede === nome_pesquisa
        ); // Procura o hóspede

        if (encontrado) {
          alert(`Hóspede ${nome_pesquisa} foi encontrado`);
        } else {
          alert(`Hóspede ${nome_pesquisa} não foi encontrado`);
        }

        opcoes_cadastro();
      }

      function listar_hospedes() {
        alert(`HOTEL ${NOME_HOTEL} - LISTAR HÓSPEDES`);

        hospedes.forEach((hospede) => {
          alert(
            `Nome: ${hospede.Hospede}\n
            Idade: ${hospede.Idade}\n
            Tipo: ${hospede.Tipo}\n
            Valor: R$${hospede.Valor.toFixed(2)}`
          );
        });

        opcoes_cadastro();
      }
      //   Escolha abastecer carros
      function abastecer_carros() {
        alert(`HOTEL ${NOME_HOTEL} - ABASTECER`);
        inicio();
      }

      //   Erro
      function erro() {
        alert("Por favor, informe um número de escolha válido.");
        inicio();
      }

      function sair() {
        if (confirm("Você deseja sair?")) {
          alert(`Muito obrigado e até logo, ${nome_funcionario}.`);
        } else {
          inicio();
        }
      }

      acesso();
    </script>
  </head>

  <body></body>
</html>
